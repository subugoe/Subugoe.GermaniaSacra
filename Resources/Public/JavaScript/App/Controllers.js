// Generated by CoffeeScript 1.7.1
var init;

germaniaSacra.controller('listController', function($scope) {
  return $scope.$watch((function() {
    return $('#content > section:first').data('type');
  }), (function(newval, oldval) {
    if (newval != null) {
      return init();
    }
  }), true);
});

init = function() {
  var type;
  type = $('#content > section:first').data('type');
  if (type == null) {
    alert('There has to be at least one <section> with data-type set.');
    return;
  }
  $('form').append($('input.csrf:first').clone());
  initList(type);
  initEditor(type);
  $(".new").click(function(e) {
    e.preventDefault();
    return newAction();
  });
  $(".togglable + .togglable").hide();
  return $(".toggle").click(function(e) {
    e.preventDefault();
    return $(this).closest(".togglable").siblings(".togglable").addBack().slideToggle();
  });
};
