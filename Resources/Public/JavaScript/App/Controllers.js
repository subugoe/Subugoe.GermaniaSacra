// Generated by CoffeeScript 1.7.1
germaniaSacra.controller('monasteryController', function($scope, $http) {
  $http.get('subugoe.germaniasacra/kloster/list.json').success(function(data) {
    return $scope.monasteries = data;
  });
  return $scope.orderProp = 'kloster_id';
});

germaniaSacra.controller('listController', function($scope, $http, Restangular, dtOptions) {
  var type;
  type = angular.element('section[ng-controller]').attr('id');
  Restangular.allUrl('entities', Restangular.configuration.baseUrl + '/' + type + '/list' + Restangular.configuration.suffix).getList().then(function(data) {
    $scope.entities = data;
    return $scope.original = data;
  });
  $scope.dtOptions = dtOptions;
  return $scope.update = function() {
    var changes, entity, _i, _len, _ref;
    changes = {};
    _ref = $scope.entities;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      entity = _ref[_i];
      if (entity.selected) {
        changes[entity.uUID] = entity;
      }
    }
    return $http.post(Restangular.configuration.baseUrl + '/' + type + '/update', changes).error(function(data) {
      return $scope.message = 'ERROR';
    }).success(function(data) {
      return $scope.message = 'Ã„nderungen gespeichert.';
    });
  };
});
