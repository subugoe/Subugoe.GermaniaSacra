// Generated by CoffeeScript 1.7.1
$.fn.addInputs = function(slideTime) {
  if (slideTime == null) {
    slideTime = 0;
  }
  return this.each(function() {
    var $clone, $fieldset;
    $fieldset = $(this).closest('fieldset');
    $clone = $(this).clone(true);
    $clone.clearForm();
    $clone.find('select').autocomplete();
    $clone.find('.coordinates').geopicker();
    $clone.insertAfter($(this)).hide().slideDown(slideTime);
    return $fieldset.find('.remove').toggleClass('disabled', $fieldset.find('.multiple:not(.dying)').length === 1);
  });
};

$.fn.removeInputs = function(slideTime) {
  if (slideTime == null) {
    slideTime = 0;
  }
  return this.each(function() {
    var $fieldset;
    $fieldset = $(this).closest('fieldset');
    $fieldset.find('.multiple').length > 1 && $(this).addClass('dying').slideUp(slideTime, this.remove);
    return $fieldset.find('.remove').toggleClass('disabled', $fieldset.find('.multiple:not(.dying)').length === 1);
  });
};

$.fn.clearForm = function() {
  return this.each(function() {
    var $form;
    $form = $(this);
    $form.find('label').removeClass('dirty');
    $form.find(':input').prop('disabled', false);
    $form.find(':input:not([name=__csrfToken]):not(:checkbox):not(:submit)').val('');
    $form.find(':checkbox, :radio').prop('checked', false);
    $form.find('select option:contains("––"), select option:contains("keine Angabe"), select option:contains("unbekannt")').prop('selected', true);
    $form.find('.multiple:gt(0)').removeInputs();
    $form.find('.map-container').remove();
    return $form.find('button.remove').prop('disabled', true);
  });
};
